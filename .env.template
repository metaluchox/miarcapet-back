# ============================================
# PLANTILLA DE VARIABLES DE ENTORNO
# ============================================
# Copia este archivo a .env y completa los valores
# NUNCA subas el archivo .env a Git (está en .gitignore)

# ============================================
# CONFIGURACIÓN DE GCP
# ============================================

# ID de tu proyecto en Google Cloud Platform
# Obtén esto en: https://console.cloud.google.com/
# Comando: gcloud config get-value project
PROJECT_ID=tu-project-id

# Región donde desplegarás los servicios
# Opciones recomendadas:
#   - southamerica-east1 (São Paulo, Brasil - más cercano a Chile)
#   - us-central1 (Iowa, USA - más económico)
#   - us-east1 (South Carolina, USA)
REGION=southamerica-east1

# ============================================
# CLOUD SQL (PostgreSQL)
# ============================================

# Nombre de tu instancia Cloud SQL
# Ejemplo: miarcapet-db
SQL_INSTANCE_NAME=miarcapet-db

# Nombre de la base de datos
# Ejemplo: miarcapet
DB_NAME=miarcapet

# Usuario de la base de datos
# Ejemplo: miarcapet_user
DB_USER=miarcapet_user

# Contraseña de la base de datos
# Genera una segura: openssl rand -base64 32 | tr -d "=+/" | cut -c1-25
DB_PASSWORD=tu-password-seguro-aqui

# Connection Name (obtenido después de crear la instancia)
# Formato: proyecto:región:instancia
# Comando: gcloud sql instances describe $SQL_INSTANCE_NAME --format='value(connectionName)'
CONNECTION_NAME=proyecto:region:instancia

# IP Pública de Cloud SQL (solo para inicialización)
# Comando: gcloud sql instances describe $SQL_INSTANCE_NAME --format='value(ipAddresses[0].ipAddress)'
SQL_PUBLIC_IP=0.0.0.0

# ============================================
# DATABASE URL PARA CLOUD RUN
# ============================================

# URL de conexión usando Cloud SQL Socket Factory (RECOMENDADO)
# No cambies esto a menos que sepas lo que haces
DATABASE_URL=jdbc:postgresql:///${DB_NAME}?cloudSqlInstance=${CONNECTION_NAME}&socketFactory=com.google.cloud.sql.postgres.SocketFactory&user=${DB_USER}

# URL de conexión usando IP pública (ALTERNATIVA - menos seguro)
# DATABASE_URL=jdbc:postgresql://${SQL_PUBLIC_IP}:5432/${DB_NAME}

# ============================================
# SECRET MANAGER
# ============================================

# Clave secreta para firmar tokens JWT
# Genera una: openssl rand -base64 64 | tr -d '\n'
# Esta se guardará en Secret Manager como 'jwt-secret-key'
JWT_SECRET=$(openssl rand -base64 64 | tr -d '\n')

# Tiempo de expiración del token JWT en milisegundos
# 86400000 ms = 24 horas
# 172800000 ms = 48 horas
JWT_EXPIRATION=86400000

# ============================================
# ARTIFACT REGISTRY
# ============================================

# Nombre del repositorio Docker en Artifact Registry
REPO_NAME=miarcapet-repo

# Nombre de la imagen Docker
IMAGE_NAME=miarcapet

# Tag de la imagen
IMAGE_TAG=latest

# URL completa de la imagen
# Formato: REGION-docker.pkg.dev/PROJECT_ID/REPO_NAME/IMAGE_NAME:TAG
IMAGE_URL=${REGION}-docker.pkg.dev/${PROJECT_ID}/${REPO_NAME}/${IMAGE_NAME}:${IMAGE_TAG}

# ============================================
# CLOUD RUN
# ============================================

# Nombre del servicio en Cloud Run
SERVICE_NAME=miarcapet

# Memoria asignada al contenedor
# Opciones: 128Mi, 256Mi, 512Mi, 1Gi, 2Gi, 4Gi, 8Gi
# Recomendado para Spring Boot: 1Gi
MEMORY=1Gi

# CPUs asignadas
# Opciones: 1, 2, 4, 8
CPU=1

# Instancias mínimas (0 = scale to zero)
MIN_INSTANCES=0

# Instancias máximas
MAX_INSTANCES=10

# Timeout de request en segundos
TIMEOUT=300

# Requests concurrentes por instancia
CONCURRENCY=80

# ============================================
# SPRING BOOT
# ============================================

# Perfil activo de Spring Boot
# Opciones: local, prod
SPRING_PROFILES_ACTIVE=prod

# ============================================
# OTROS
# ============================================

# Tu IP pública (para acceso temporal a Cloud SQL durante setup)
# Comando: curl -s ifconfig.me
MY_IP=0.0.0.0

# Número del proyecto GCP (se obtiene automáticamente)
# Comando: gcloud projects describe $PROJECT_ID --format='value(projectNumber)'
PROJECT_NUMBER=123456789012

# Service Account de Cloud Run
# Formato: PROJECT_NUMBER-compute@developer.gserviceaccount.com
SERVICE_ACCOUNT=${PROJECT_NUMBER}-compute@developer.gserviceaccount.com

# ============================================
# NOTAS IMPORTANTES
# ============================================
#
# 1. NUNCA subas este archivo con valores reales a Git
# 2. Usa Secret Manager para producción (no variables de entorno simples)
# 3. Genera contraseñas seguras con openssl rand -base64 32
# 4. Los secretos en Secret Manager tienen versionado automático
# 5. Costos estimados: ~$9-15 USD/mes para tráfico bajo
#
# Para más información, consulta el plan completo en:
# ~/.claude/plans/purrfect-leaping-canyon.md
